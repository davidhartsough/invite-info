const getEl=t=>document.getElementById(t),form=getEl("form"),loader=getEl("loader"),titleInputEl=getEl("title"),startInputEl=getEl("start"),endInputEl=getEl("end"),locationInputEl=getEl("location"),descriptionInputEl=getEl("description"),linkInputEl=getEl("link"),emailInputEl=getEl("email");function getOneWeekFromNow(){const t=new Date;return t.setDate(t.getDate()+7),t.setHours(19,0,0,0),`${t.toISOString().slice(0,11)}19:00`}function getMinDT(){const t=new Date;return t.setHours(1,1,0,0),`${t.toISOString().slice(0,11)}01:00`}function getMaxDT(){const t=new Date;return t.setDate(t.getDate()+7),t.setFullYear(t.getFullYear()+1),t.setMonth(t.getMonth()+2),t.setHours(23,0,0,0),`${t.toISOString().slice(0,11)}19:00`}startInputEl.value=getOneWeekFromNow(),startInputEl.setAttribute("min",getMinDT()),startInputEl.setAttribute("max",getMaxDT()),endInputEl.value="20:00";const urlPattern=/^(https?:\/\/)((?!-)(?!.*--)[a-zA-Z\-0-9]{1,63}(?<!-)\.)+[a-zA-Z]{2,63}(\/[^\s]*)?$/,emailPattern=/^([^<>()[\]\\.,;:\s@"]{1,63})@((((?!-)(?!.*--)[a-zA-Z\-0-9]{1,63}(?<!-))+\.)+([a-zA-Z]{2,63}))$/,startPattern=/^(20[2-9]{1}[2-9]{1}-[0-1]{1}[0-9]{1}-[0-3]{1}[0-9]{1}T[0-2]{1}[0-9]{1}:[0-5]{1}[0-9]{1})$/,endPattern=/^([0-2]{1}[0-9]{1}:[0-5]{1}[0-9]{1})$/,getTimestamp=t=>new Date(t).getTime();form.addEventListener("submit",async t=>{t.preventDefault(),form.style.display="none",loader.style.display="block";const s=titleInputEl.value.trim();if(!s||s.length<2||s.length>80)return titleInputEl.focus(),!1;const o=startInputEl.value;if(!o||!startPattern.test(o))return startInputEl.focus(),!1;const i=endInputEl.value;if(!i||!endPattern.test(i))return endInputEl.focus(),!1;const a=locationInputEl.value.trim();if(a.length<2||a.length>140)return locationInputEl.focus(),!1;const l=descriptionInputEl.value.trim();if(l.length<2||l.length>800)return descriptionInputEl.focus(),!1;const n=linkInputEl.value;if(n&&n.length>0&&(n.length>150||!urlPattern.test(n)))return linkInputEl.focus(),!1;const e=emailInputEl.value;if(e&&e.length>0&&(e.length>150||!emailPattern.test(e)))return e.focus(),!1;const u=getTimestamp(o);let r=getTimestamp(`${o.slice(0,11)}${i}`);r-u<0&&(r+=864e5);const c={title:s,start:u,end:r,location:a,description:l};n&&(c.link=n),e&&(c.email=e);const f=await fetch("https://invite-info.web.app/api/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventInfo:c})}),{id:p}=await f.json();return window.location.href=`https://invite-info.web.app/event/?i=${p}`,!1});
