const getMetaEl=t=>document.head.querySelector(`meta[${t}]`),metaDescEl=getMetaEl('name="description"'),ogTitleEl=getMetaEl('property="og:title"'),ogDescEl=getMetaEl('property="og:description"'),ogUrlEl=getMetaEl('property="og:url"'),twitterDescEl=getMetaEl('name="twitter:description"'),getEl=t=>document.getElementById(t),contentDiv=getEl("content"),loader=getEl("loader"),websiteDiv=getEl("website"),contactDiv=getEl("contact"),titleH1=getEl("title"),datetimeP=getEl("date-time"),locationP=getEl("location"),descriptionP=getEl("description"),linkA=getEl("link"),emailA=getEl("email"),googleCalLink=getEl("add-to-google-cal"),appleCalLink=getEl("add-to-apple-cal"),addToCalBtn=getEl("add-to-cal"),modal=getEl("modal");addToCalBtn.addEventListener("click",()=>{modal.className="show"});function unstickModal(){modal.className=""}googleCalLink.addEventListener("click",()=>{unstickModal()}),appleCalLink.addEventListener("click",()=>{unstickModal()});const baseURL="https://invite-info.web.app/",getURL=t=>`${baseURL}event/?i=${t}`;function setDateTime(t,e){const n=new Date(t).toLocaleString(void 0,{dateStyle:"full",timeStyle:"short"}),o=new Date(e).toLocaleString(void 0,{timeStyle:"short"});datetimeP.textContent=`${n} - ${o}`}function render({id:t,title:e,location:n,description:o,start:l,end:r,link:c,email:s,gCalLink:d,icsLink:p}){const a=`"${e}" | Invite\u2022Info`,i=`"${e}": event information`;document.title=a,metaDescEl.setAttribute("content",i),ogTitleEl.setAttribute("content",a),ogDescEl.setAttribute("content",i),ogUrlEl.setAttribute("content",getURL(t)),twitterDescEl.setAttribute("content",i),titleH1.textContent=e,setDateTime(l,r),locationP.textContent=n,descriptionP.textContent=o,c?(linkA.textContent=c,linkA.href=c):websiteDiv.style.display="none",s?(emailA.textContent=s,emailA.href=`mailto:${s}`):contactDiv.style.display="none",googleCalLink.href=d,appleCalLink.href=p,loader.style.display="none",contentDiv.style.display="block"}async function getInfo(t){const e=await fetch(`${baseURL}api/info?id=${t}`),{info:n}=await e.json();window.localStorage.setItem(t,JSON.stringify(n)),render(n)}loader.style.display="block";const{searchParams}=new URL(window.location.href),id=searchParams.get("i");if(id&&id.length>2){const t=window.localStorage.getItem(id);if(t){const e=JSON.parse(t);render(e)}else getInfo(id)}else window.location.replace(baseURL);
